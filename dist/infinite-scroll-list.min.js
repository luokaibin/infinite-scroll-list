!function(){"use strict";var e,t;!function(e){e.Top="top",e.Bottom="bottom"}(e||(e={})),function(e){e.TopLoading="top-loading",e.Loading="loading",e.NoData="no-data"}(t||(t={}));class s extends HTMLElement{constructor(){super(),this._observers=new Map,this._resizeObserverRef=null,this._refElements=new Map,this._thresholds=new Map,this._flags=new Map,this._container=null,this.attachShadow({mode:"open"}),this._observers.set(e.Top,null),this._observers.set(e.Bottom,null),this._refElements.set(e.Top,null),this._refElements.set(e.Bottom,null),this._intersectionCallback=this._intersectionCallback.bind(this),this._resizeCallback=this._resizeCallback.bind(this)}static get observedAttributes(){return["on-end-reached-threshold","has-next-page","on-start-reached-threshold","has-previous-page"]}attributeChangedCallback(e,s,n){if(s!==n)switch(e){case"on-end-reached-threshold":this._updateThreshold("end",n);break;case"on-start-reached-threshold":this._updateThreshold("start",n);break;case"has-next-page":this._updateFlag("nextPage",n),this._updateSlotVisibility(t.Loading,t.NoData,this._flags.get("nextPage")||!1);break;case"has-previous-page":this._updateFlag("previousPage",n),this._updateSlotVisibility(t.TopLoading,null,this._flags.get("previousPage")||!1)}}_updateThreshold(t,s){const n=Number(s)||0;this._thresholds.set(t,n);const i="end"===t?this._refElements.get(e.Bottom):this._refElements.get(e.Top);i&&(i.style.height=`${n}px`)}_updateFlag(e,t){this._flags.set(e,null!==t&&"false"!==t)}connectedCallback(){this._thresholds.set("end",Number(this.getAttribute("on-end-reached-threshold"))||0),this._thresholds.set("start",Number(this.getAttribute("on-start-reached-threshold"))||0),this._flags.set("nextPage","false"!==this.getAttribute("has-next-page")),this._flags.set("previousPage","false"!==this.getAttribute("has-previous-page")),this._render();const t=this._findScrollContainer();this._initObserver(e.Bottom,t),this._initObserver(e.Top,t),this._resizeObserverRef=new ResizeObserver(this._resizeCallback),this.parentElement&&this._resizeObserverRef.observe(this.parentElement)}_initObserver(e,t){const s=new IntersectionObserver((t=>this._intersectionCallback(t,e)),{threshold:0,root:t}),n=this._refElements.get(e);n&&s.observe(n),this._observers.set(e,s)}disconnectedCallback(){this._observers.forEach((e=>{e&&e.disconnect()})),this._observers.clear(),this._resizeObserverRef&&(this._resizeObserverRef.disconnect(),this._resizeObserverRef=null)}_findScrollContainer(){let e=this.parentElement;for(;e;){const t=window.getComputedStyle(e).overflowY;if("auto"===t||"scroll"===t)return e;e=e.parentElement}return null}_intersectionCallback(t,s){const[n]=t;if(!n.isIntersecting)return;const i={[e.Bottom]:{flag:"nextPage",event:"end-reached"},[e.Top]:{flag:"previousPage",event:"start-reached"}}[s];this._flags.get(i.flag)&&this.dispatchEvent(new CustomEvent(i.event,{bubbles:!0,composed:!0}))}_resizeCallback(){const e=this._findScrollContainer();this._observers.forEach(((t,s)=>{t&&(t.disconnect(),this._initObserver(s,e))}))}_updateSlotVisibility(e,t,s){const n=this.shadowRoot?.querySelector(`.${e}-slot`);if(n&&(n.className=s?`${e}-slot contents`:`${e}-slot hidden`),t){const e=this.shadowRoot?.querySelector(`.${t}-slot`);e&&(e.className=s?`${t}-slot hidden`:`${t}-slot contents`)}}_createSlotContainer(e,t){const s=document.createElement("div");s.className=t?`${e}-slot contents`:`${e}-slot hidden`;const n=document.createElement("slot");return n.setAttribute("name",e),s.appendChild(n),s}_render(){if(!this.shadowRoot)return;const s=document.createElement("style");s.textContent="\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.relative {\n  position: relative;\n}\n\n.absolute {\n  position: absolute;\n}\n\n.bottom-0 {\n  bottom: 0px;\n}\n\n.top-0 {\n  top: 0px;\n}\n\n.z-\\[-1\\] {\n  z-index: -1;\n}\n\n.w-full {\n  width: 100%;\n}\n\n.hidden {\n  display: none;\n}\n\n.contents {\n  display: contents;\n}\n",this.shadowRoot.appendChild(s),this._container=document.createElement("div"),this._container.setAttribute("part","container"),this._container.className="relative";const n=document.createElement("div");n.className="absolute top-0 z-[-1]",n.style.height=`${this._thresholds.get("start")}px`,this._refElements.set(e.Top,n);const i=document.createElement("div");i.className="absolute bottom-0 z-[-1]",i.style.height=`${this._thresholds.get("end")}px`,this._refElements.set(e.Bottom,i);const o=this._flags.get("previousPage")||!1,a=this._createSlotContainer(t.TopLoading,o),r=document.createElement("slot"),l=this._flags.get("nextPage")||!1,h=this._createSlotContainer(t.Loading,l),d=this._createSlotContainer(t.NoData,!l);this._container.appendChild(n),this._container.appendChild(a),this._container.appendChild(r),this._container.appendChild(i),this._container.appendChild(h),this._container.appendChild(d),this.shadowRoot.appendChild(this._container)}}customElements.define("infinite-scroll-list",s)}();
//# sourceMappingURL=infinite-scroll-list.min.js.map
